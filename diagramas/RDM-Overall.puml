@startuml RDM-Overall
title RDM CMMI 2.0 - Práticas Ágeis\nEstrutura por Papéis e Fases Iterativas

' === FASE 1: PRODUCT BACKLOG MANAGEMENT (Contínuo) ===

partition "FASE 1: Product Backlog Management (Contínuo)" {
  start
  :**RDM 1.1** - Criar User Stories iniciais no Product Backlog;
  note right
    Artefato: Product Backlog
    Formato: User Stories
  end note

  :**RDM 2.1** - Elicitar necessidades com stakeholders;

  :Fornecer feedback e necessidades de negócio;
  :Participar de workshops de Discovery;

  :**RDM 2.2** - Realizar Backlog Refinement (toda a equipe);

  repeat
    :Refinar User Stories;
    :Estimar (Planning Poker);
    :Priorizar (MoSCoW, WSJF);
    note right
      Colaboração cross-funcional:
      - PO: prioriza valor
      - Dev: estima esforço
      - QA: identifica testabilidade
    end note
  repeat while (Backlog pronto\npara Planning?) is (não)

}

' === FASE 2: SPRINT PLANNING ===

partition "FASE 2: Sprint Planning" {

  :Facilitar Sprint Planning;

  :**RDM 2.3** - Alinhar entendimento sobre User Stories da Sprint;

  repeat
    :Realizar "Três Amigos" (PO, Dev, QA);
    :Definir Critérios de Aceitação;
    :Criar cenários BDD;
    note right
      Técnicas:
      - Example Mapping
      - Acceptance Test-Driven Development
      - Definition of Done (DoD)
    end note
  repeat while (Consenso\nalcançado?) is (não)

  :**RDM 2.4** - Obter compromisso do Time;

  :Declarar capacidade da Sprint;
  :Comprometer-se com Sprint Goal e User Stories;

  if (Time confiante\nna entrega?) then (sim)
    note right
      Artefatos:
      - Sprint Backlog
      - Sprint Goal
      - Tasks decompostas
    end note
  else (não)
    :Re-negociar escopo com Product Owner;
    detach
  endif

}

' === FASE 3: SPRINT EXECUTION ===

partition "FASE 3: Sprint Execution (2-4 semanas)" {

  :**RDM 2.5** - Implementar User Stories com rastreabilidade;

  :Vincular código a US (commits com #US-ID);
  :Criar testes automatizados referenciando US;
  :Atualizar CI/CD pipeline;
  note right
    Rastreabilidade Ágil:
    - Git commits → User Story
    - Testes BDD → Critérios de Aceitação
    - Build → Sprint Backlog
  end note

  :**RDM 2.6** - Monitorar progresso diário;

  repeat
    :Daily Scrum (15 min);
    :Verificar impedimentos;

    if (Mudança de\nrequisito?) then (sim)
  :Avaliar impacto;

      if (Crítica para\nSprint atual?) then (sim)
  :Ajustar Sprint Backlog;
  :Atualizar rastreabilidade;
        note right
          Flexibilidade Ágil:
          Mudanças aceitas, mas
          negociadas com o Time
        end note
      else (não)
  :Adicionar ao Product Backlog para próxima Sprint;
      endif
    else (não)
    endif

  repeat while (Sprint\nem andamento?) is (sim)

}

' === FASE 4: SPRINT REVIEW & RETROSPECTIVE ===

partition "FASE 4: Sprint Review & Retrospective" {

  :Sprint Review: Demonstrar incremento;

  :**RDM 2.6 (continuação)** - Validar User Stories contra Definition of Done;

  if (Incremento\naceito?) then (sim)
    :Marcar User Stories como "Done";
    :Atualizar Product Backlog;

  :Sprint Retrospective: Inspecionar processo de requisitos;
    :Identificar melhorias (ex: melhorar DoR, refinar técnicas de elicitação);
    note right
      Melhoria Contínua:
      - O que funcionou bem?
      - O que pode melhorar no RDM?
      - Ações para próxima Sprint
    end note

    :Aplicar aprendizados na próxima iteração;

  else (não)
    :Mover User Stories não aceitas de volta ao Product Backlog;
  endif

}

 :Preparar próximo ciclo (volta à Fase 1);

stop

@enduml
